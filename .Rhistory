?data.frame
table$1 <- c("Now until August 2015", "August 2015-November 2015", "November 2015- May 2016")
table$one <- c("Now until August 2015", "August 2015-November 2015", "November 2015- May 2016")
table <- c("Now until August 2015", "August 2015-November 2015", "November 2015- May 2016")
table
table <- data.frame()
table$one <- c("Now until August 2015", "August 2015-November 2015", "November 2015- May 2016")
table <- data.frame(y=3, x=2)
table$one <- c("Now until August 2015", "August 2015-November 2015", "November 2015- May 2016")
table
table <- data.frame(y=1:3, x=1:2)
table <- data.frame(y=1:3, x=2)
table
table$y <- c("Now until August 2015", "August 2015-November 2015", "November 2015- May 2016")
table
table$y <- c("Now until August 2015", "August 2015 - November 2015", "November 2015- May 2016")
table
table <- data.frame(y=1:5, x=2)
table$y <- c("Now until August 2015", "August 2015 - November 2015", "November 2015- May 2016", "May 2016 - August 2016", "August 2016 - December 2016")
table$x <- c("Complete Fall 2014 surveys and feather collection", "Fall 2015 surveys", "Write Annual Report, Complete Analysis of Survey Data, Begin Writing Dissertation", "Analysis of feather data at U of Saskatchewan", "Publish Results, Finish Dissertation")
table
12000/7284
12000-7284
/180
4716/180
180*26
library(MASS)
library(pscl)
library(AER)
install.packages(c("pscl", "AER", "vcd", "statmod", "VGAM", "gamiss", "lmtest", "mgcv", "tweedie", "fishMod", "msme"))
Rversion()
R.Version()
library(xtable)
?xtable
library(RMark)
MarkPath="/Applications/Mark"
data(dipper)
ls()
myexample=mark(dipper)
?mark
?mark
?MarkViewer
setwd("~/Documents/RMark")
setwd("~/Documents/RMark")
dat1 <- read.csv('Fournier_bnds_CAGO_AR_201412180839.csv',header=T)
dat2 <- read.csv('Fournier_encs_from_AR_2000_201412180934.csv',header=T)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
nrow(dat1)
nrow(dat2)
nrow(dat3)
names(dat1)
dat1$BANDING_DATE
names(dat1)
dat1$SEX_CODE
unique(dat1$SEX_CODE)
names(dat1)
unique(dat1$SPECIES_ID)
dat1 <- dat1[dat1$SPECIES_ID==1720,]
unique(dat1$SPECIES_ID)
dat1$BIRD_STATUS
unique(dat1$SPECIES_ID)
names(dat1)
dat1 <- dat1[,c("BAND_NUM","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","SEX_CODE","AGE_CODE")]
colnames(dat1) <- tolower(colnames(dat1))
head(dat1)
names(dat2)
unique(dat2$SPECIES_ID)
unique(dat2$B_SPECIES_ID)
dat2 <- dat2[,c("BAND_NUM","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","B_AGE_CODE","B_SEX_CODE","ENCOUNTER_DATE","ENCOUNTER_DAY","ENCOUNTER_MONTH","ENCOUNTER_YEAR")]
head(dat2)
names(dat3)
colnames(dat2) <- tolower(colnames(dat2))
names(dat3)
dat3$BAND.ID
names(dat3)
dat3 <- dat3[,c("B.AGE.CODE","B.SEX.CODE","BAND.ID","BANDING.DATE","BANDING.DAY","BANDING.MONTH","BANDING.YEAR","ENCOUNTER.DATE","ENCOUNTER.DAY","ENCOUNTER.MONTH","ENCOUNTER.YEAR")]
colnames(dat3) <- tolower(colnames(dat3))
namesdat3 <- colnames(dat3)
namesdat3
namesdat3 <- gsub(".", '_', namesdat3, fixed = T)
namesdat3
colnames(dat3) <- namesdat3
head(dat3)
dat1 <- read.csv('Fournier_bnds_CAGO_AR_201412180839.csv',header=T)
dat2 <- read.csv('Fournier_encs_from_AR_2000_201412180934.csv',header=T)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
names(dat1)
head(dat1)
head(dat2)
# Manipulating Raw Data Files from the BBL
setwd("~/Documents/RMark")
dat1 <- read.csv('Fournier_bnds_CAGO_AR_201412180839.csv',header=T)
dat2 <- read.csv('Fournier_encs_from_AR_2000_201412180934.csv',header=T)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
dat1$state <- "AR"
dat1 <- dat1[dat1$SPECIES_ID==1720,] #removes the cackling geese.
dat1 <- dat1[,c("BAND_NUM","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","SEX_CODE","AGE_CODE","state")]
colnames(dat1) <- tolower(colnames(dat1))
dat2 <- dat2[,c("BAND_NUM","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","B_AGE_CODE","B_SEX_CODE","ENCOUNTER_DATE","ENCOUNTER_DAY","ENCOUNTER_MONTH","ENCOUNTER_YEAR","E_PLACE_NAME")]
colnames(dat2) <- tolower(colnames(dat2))
dat3$state <- "AR"
dat3 <- dat3[,c("B.AGE.CODE","B.SEX.CODE","BAND.ID","BANDING.DATE","BANDING.DAY","BANDING.MONTH","BANDING.YEAR","ENCOUNTER.DATE","ENCOUNTER.DAY","ENCOUNTER.MONTH","ENCOUNTER.YEAR","state")]
colnames(dat3) <- tolower(colnames(dat3))
namesdat3 <- colnames(dat3)
namesdat3 <- gsub(".", '_', namesdat3, fixed = T)
colnames(dat3) <- namesdat3
names(dat3)
names(dat2)
names(dat1)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
dat3$state <- "AR"
dat3 <- dat3[,c("BAND.ID","B.AGE.CODE","B.SEX.CODE","BANDING.DATE","BANDING.DAY","BANDING.MONTH","BANDING.YEAR","ENCOUNTER.DATE","ENCOUNTER.DAY","ENCOUNTER.MONTH","ENCOUNTER.YEAR","state")]
colnames(dat3) <- tolower(colnames(dat3))
namesdat3 <- colnames(dat3)
namesdat3 <- gsub(".", '_', namesdat3, fixed = T)
colnames(dat3) <- namesdat3
names(dat3)
names(dat2)
dat1 <- read.csv('Fournier_bnds_CAGO_AR_201412180839.csv',header=T)
dat2 <- read.csv('Fournier_encs_from_AR_2000_201412180934.csv',header=T)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
dat1$state <- "AR"
dat1 <- dat1[dat1$SPECIES_ID==1720,] #removes the cackling geese.
dat1 <- dat1[,c("BAND_NUM","AGE_CODE","SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","state")]
colnames(dat1) <- tolower(colnames(dat1))
dat2 <- dat2[,c("BAND_NUM","B_AGE_CODE","B_SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","E_PLACE_NAME","ENCOUNTER_DATE","ENCOUNTER_DAY","ENCOUNTER_MONTH","ENCOUNTER_YEAR")]
colnames(dat2) <- tolower(colnames(dat2))
dat3$state <- "AR"
dat3 <- dat3[,c("BAND.ID","B.AGE.CODE","B.SEX.CODE","BANDING.DATE","BANDING.DAY","BANDING.MONTH","BANDING.YEAR","state","ENCOUNTER.DATE","ENCOUNTER.DAY","ENCOUNTER.MONTH","ENCOUNTER.YEAR")]
colnames(dat3) <- tolower(colnames(dat3))
namesdat3 <- colnames(dat3)
namesdat3 <- gsub(".", '_', namesdat3, fixed = T)
colnames(dat3) <- namesdat3
names(dat1)
names(dat2)
names(dat3)
ncol(dat1)
ncol(dat3)
ncol(dat2)
dat1$e_date <- NA
at1 <- read.csv('Fournier_bnds_CAGO_AR_201412180839.csv',header=T)
dat2 <- read.csv('Fournier_encs_from_AR_2000_201412180934.csv',header=T)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
dat1$state <- "AR"
dat1 <- dat1[dat1$SPECIES_ID==1720,] #removes the cackling geese.
dat1 <- dat1[,c("BAND_NUM","AGE_CODE","SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","state")]
colnames(dat1) <- tolower(colnames(dat1))
dat1$e_date <- NA
dat1$e_day <- NA
dat1$e_month <- NA
dat1$e_year <- NA
dat2 <- dat2[,c("BAND_NUM","B_AGE_CODE","B_SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","E_PLACE_NAME","ENCOUNTER_DATE","ENCOUNTER_DAY","ENCOUNTER_MONTH","ENCOUNTER_YEAR")]
colnames(dat2) <- tolower(colnames(dat2))
dat3$state <- "AR"
dat3 <- dat3[,c("BAND.ID","B.AGE.CODE","B.SEX.CODE","BANDING.DATE","BANDING.DAY","BANDING.MONTH","BANDING.YEAR","state","ENCOUNTER.DATE","ENCOUNTER.DAY","ENCOUNTER.MONTH","ENCOUNTER.YEAR")]
colnames(dat3) <- tolower(colnames(dat3))
namesdat3 <- colnames(dat3)
namesdat3 <- gsub(".", '_', namesdat3, fixed = T)
colnames(dat3) <- namesdat3
setwd("~/Documents/RMark")
dat1 <- read.csv('Fournier_bnds_CAGO_AR_201412180839.csv',header=T)
dat2 <- read.csv('Fournier_encs_from_AR_2000_201412180934.csv',header=T)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
dat1$state <- "AR"
dat1 <- dat1[dat1$SPECIES_ID==1720,] #removes the cackling geese.
dat1 <- dat1[,c("BAND_NUM","AGE_CODE","SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","state")]
colnames(dat1) <- tolower(colnames(dat1))
dat1$e_date <- NA
dat1$e_day <- NA
dat1$e_month <- NA
dat1$e_year <- NA
dat2 <- dat2[,c("BAND_NUM","B_AGE_CODE","B_SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","E_PLACE_NAME","ENCOUNTER_DATE","ENCOUNTER_DAY","ENCOUNTER_MONTH","ENCOUNTER_YEAR")]
colnames(dat2) <- tolower(colnames(dat2))
dat3$state <- "AR"
dat3 <- dat3[,c("BAND.ID","B.AGE.CODE","B.SEX.CODE","BANDING.DATE","BANDING.DAY","BANDING.MONTH","BANDING.YEAR","state","ENCOUNTER.DATE","ENCOUNTER.DAY","ENCOUNTER.MONTH","ENCOUNTER.YEAR")]
colnames(dat3) <- tolower(colnames(dat3))
namesdat3 <- colnames(dat3)
namesdat3 <- gsub(".", '_', namesdat3, fixed = T)
colnames(dat3) <- namesdat3
head(dat1)
head(dat2)
head(dat3)
colnames(dat3)
colnames(dat1) <- colnames(dat3)
colnames(dat2) <- colnames(dat3)
names(dat1)
colnames(dat2)
colnames(dat3)
dat1_1 <- cbind(dat1, dat2)
dat1_1 <- rbind(dat1, dat2)
dat1_2 <- rbind(dat1_1, dat3)
head(dat1_2)
nrow(dat1_2)
write.csv(dat1_2, "canada_geese_arkansas.csv")
head(dat1_2)
unique(dat1_2)
str(dat1_2)
dat3$banding_date
dat2$banding_date
dat1$banding_date
str(dat1_2)
unique(dat1_2$encounter_day)
unique(dat1_2$encounter_month)
unique(dat1_2$encounter_year)
dat2$ENCOUNTER_DAY
dat2$ENCOUNTER_DAY
dat2
dat1 <- read.csv('Fournier_bnds_CAGO_AR_201412180839.csv',header=T)
dat2 <- read.csv('Fournier_encs_from_AR_2000_201412180934.csv',header=T)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
names(dat2)
head(dat2)
dat2$E_HOW_CAPTURED
dat3$E_HOW_CAPTURED
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
names(dat32)
names(dat3)
dat3$E.PRESENT.CONDITION.CODE
names(dat2)
# Manipulating Raw Data Files from the BBL
setwd("~/Documents/RMark")
dat1 <- read.csv('Fournier_bnds_CAGO_AR_201412180839.csv',header=T)
dat2 <- read.csv('Fournier_encs_from_AR_2000_201412180934.csv',header=T)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
dat1$state <- "AR"
dat1 <- dat1[dat1$SPECIES_ID==1720,] #removes the cackling geese.
dat1 <- dat1[,c("BAND_NUM","AGE_CODE","SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","state")]
dat1$e_date <- NA
dat1$e_day <- NA
dat1$e_month <- NA
dat1$e_year <- NA
dat1$e_present_code <- NA
dat2 <- dat2[,c("BAND_NUM","B_AGE_CODE","B_SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","E_PLACE_NAME","ENCOUNTER_DATE","ENCOUNTER_DAY","ENCOUNTER_MONTH","ENCOUNTER_YEAR","E_PRESENT_CONDITION_CODE")]
dat3$state <- "AR"
dat3 <- dat3[,c("BAND.ID","B.AGE.CODE","B.SEX.CODE","BANDING.DATE","BANDING.DAY","BANDING.MONTH","BANDING.YEAR","state","ENCOUNTER.DATE","ENCOUNTER.DAY","ENCOUNTER.MONTH","ENCOUNTER.YEAR","E.PRESENT.CONDITION.CODE")]
colnames(dat3) <- tolower(colnames(dat3))
namesdat3 <- colnames(dat3)
namesdat3 <- gsub(".", '_', namesdat3, fixed = T)
colnames(dat3) <- namesdat3
colnames(dat1) <- colnames(dat3)
colnames(dat2) <- colnames(dat3)
dat1_1 <- rbind(dat1, dat2)
dat1_2 <- rbind(dat1_1, dat3)
names(dat1_2)
unique(dat1_2$e_present_condition_code)
dat$l_d <- ifelse(dat1_2$e_present_condition_code==1|dat1_2$e_present_condition_code==2|dat1_2$e_present_condition_code==3,"unknown",
dat1_2$e_present_condition_code==4|dat1_2$e_present_condition_code==5|dat1_2$e_present_condition_code==6,"dead",
dat1_2$e_present_condition_code==7|dat1_2$e_present_condition_code==8|dat1_2$e_present_condition_code==9|dat1_2$e_present_condition_code==10|dat1_2$e_present_condition_code==11|dat1_2$e_present_condition_code==12|dat1_2$e_present_condition_code==13|dat1_2$e_present_condition_code==14|dat1_2$e_present_condition_code==15|dat1_2$e_present_condition_code==16,"alive",NA)
dat$l_d <- ifelse(dat1_2$e_present_condition_code==1|dat1_2$e_present_condition_code==2|dat1_2$e_present_condition_code==3,"unknown",
ifelse(dat1_2$e_present_condition_code==4|dat1_2$e_present_condition_code==5|dat1_2$e_present_condition_code==6,"dead",
ifelse(dat1_2$e_present_condition_code==7|dat1_2$e_present_condition_code==8|dat1_2$e_present_condition_code==9|dat1_2$e_present_condition_code==10|dat1_2$e_present_condition_code==11|dat1_2$e_present_condition_code==12|dat1_2$e_present_condition_code==13|dat1_2$e_present_condition_code==14|dat1_2$e_present_condition_code==15|dat1_2$e_present_condition_code==16,"alive",NA)
dat$l_d <- ifelse(dat1_2$e_present_condition_code==1|dat1_2$e_present_condition_code==2|dat1_2$e_present_condition_code==3,"unknown",
ifelse(dat1_2$e_present_condition_code==4|dat1_2$e_present_condition_code==5|dat1_2$e_present_condition_code==6,"dead",
ifelse(dat1_2$e_present_condition_code==7|dat1_2$e_present_condition_code==8|dat1_2$e_present_condition_code==9|dat1_2$e_present_condition_code==10|dat1_2$e_present_condition_code==11|dat1_2$e_present_condition_code==12|dat1_2$e_present_condition_code==13|dat1_2$e_present_condition_code==14|dat1_2$e_present_condition_code==15|dat1_2$e_present_condition_code==16,"alive",NA))
dat$l_d <- ifelse(dat1_2$e_present_condition_code==1|dat1_2$e_present_condition_code==2|dat1_2$e_present_condition_code==3,"unknown",
ifelse(dat1_2$e_present_condition_code==4|dat1_2$e_present_condition_code==5|dat1_2$e_present_condition_code==6,"dead",
ifelse(dat1_2$e_present_condition_code==7|dat1_2$e_present_condition_code==8|dat1_2$e_present_condition_code==9|dat1_2$e_present_condition_code==10|dat1_2$e_present_condition_code==11|dat1_2$e_present_condition_code==12|dat1_2$e_present_condition_code==13|dat1_2$e_present_condition_code==14|dat1_2$e_present_condition_code==15|dat1_2$e_present_condition_code==16,"alive",NA))
)
dat1_2$l_d <- ifelse(dat1_2$e_present_condition_code==1|dat1_2$e_present_condition_code==2|dat1_2$e_present_condition_code==3,"unknown",
ifelse(dat1_2$e_present_condition_code==4|dat1_2$e_present_condition_code==5|dat1_2$e_present_condition_code==6,"dead",
ifelse(dat1_2$e_present_condition_code==7|dat1_2$e_present_condition_code==8|dat1_2$e_present_condition_code==9|dat1_2$e_present_condition_code==10|dat1_2$e_present_condition_code==11|dat1_2$e_present_condition_code==12|dat1_2$e_present_condition_code==13|dat1_2$e_present_condition_code==14|dat1_2$e_present_condition_code==15|dat1_2$e_present_condition_code==16,"alive",NA))
)
dat1_2$l_d <- ifelse(dat1_2$e_present_condition_code==1|dat1_2$e_present_condition_code==2|dat1_2$e_present_condition_code==3,"unknown",
ifelse(dat1_2$e_present_condition_code==4|dat1_2$e_present_condition_code==5|dat1_2$e_present_condition_code==6,"dead",
ifelse(dat1_2$e_present_condition_code==7|dat1_2$e_present_condition_code==8|dat1_2$e_present_condition_code==9|dat1_2$e_present_condition_code==10|dat1_2$e_present_condition_code==11|dat1_2$e_present_condition_code==12|dat1_2$e_present_condition_code==13|dat1_2$e_present_condition_code==14|dat1_2$e_present_condition_code==15|dat1_2$e_present_condition_code==16,"alive",NA)))
unique(dat1_2$l_d)
write.csv(dat1_2, "canada_geese_arkansas.csv")
write.csv(dat1_2, "canada_geese_arkansas.csv")
setwd("~/RMark")
getwd()
setwd("/Users/AurielFournier/Documents/RMark")
dat <- read.csv("canada_goose_arkansas.csv",header=T)
dat <- read.csv("canada_geese_arkansas.csv",header=T)
setwd("/Users/AurielFournier/Documents/RMark")
dat <- read.csv("canada_geese_arkansas.csv",header=T)
head(dat)
dat <- read.csv("canada_geese_arkansas.csv",header=T)
dat$b_new_year <- ifelse(dat$banding_month>=6,dat$banding_year, dat$banding_year-1)
dat$r_new_year <- ifelse(dat$encounter_month>=6,dat$encounter_year, dat$encounter_year-1)
names(dat)
setwd("/Users/AurielFournier/Documents/RMark")
dat <- read.csv("canada_geese_arkansas.csv",header=T)
dat$b_new_year <- ifelse(dat$banding_month>=6,dat$banding_year, dat$banding_year-1)
dat$e_new_year <- ifelse(dat$encounter_month>=6,dat$encounter_year, dat$encounter_year-1)
names(dat)
setwd("/Users/AurielFournier/Documents/RMark")
dat <- read.csv("canada_geese_arkansas.csv",header=T)
dat$b_new_year <- ifelse(dat$banding_month>=6,dat$banding_year, dat$banding_year-1)
dat$e_new_year <- ifelse(dat$encounter_month>=6,dat$encounter_year, dat$encounter_year-1)
b <- dat[,c("band_id","b_new_year","l_d","b_age_code","b_sex_code")]
colnames(b) <- c("band_id","year","l_d","age","sex")
e <- dat[,c("band_id","e_new_year","l_d","b_age_code","b_sex_code")]
colnames(e) <- c("band_id","year","l_d","age","sex")
rat <- rbind(b,e)
rat$num <- 1
cdat <- cast(data=rat, band_id ~ year)
library(reshape)
cdat <- cast(data=rat, band_id ~ year)
head(cdat)
nrow(cdat)
rat <- rat[rat$year>=2000,]
cdat <- cast(data=rat, band_id ~ year)
head(cdat)
nrow(cdat)
cdat[2:ncol(cdat)] <- ifelse(cdat[2:ncol(cdat)]>=1, 1,0)
cdat$cap <- paste(cdat$"2000",cdat$"2001",cdat$"2002", cdat$"2003",cdat$"2004",cdat$"2005",cdat$"2006",cdat$"2007",cdat$"2008",cdat$"2009",cdat$"2010",cdat$"2011",cdat$"2012", sep="")
cdat$cap <- paste(cdat$"2000",cdat$"2001",cdat$"2002", cdat$"2003",cdat$"2004",cdat$"2005",cdat$"2006",cdat$"2007",cdat$"2008",cdat$"2009",cdat$"2010",cdat$"2011",cdat$"2012",cdat$"2013",cdat$"2014", sep="")
cdat$cap <- paste(cdat$"2000",cdat$"2001",cdat$"2002", cdat$"2003",cdat$"2004",cdat$"2005",cdat$"2006",cdat$"2007",cdat$"2008",cdat$"2009",cdat$"2010",cdat$"2011",cdat$"2012",cdat$"2013",cdat$"2014", sep="")
enhist <- data.frame(cdat$band, cdat$cap)
enhist$cdat.cap <- as.character(enhist$cdat.cap)
write.csv(enhist, 'enhist.csv')
names(rat)
cdat <- cast(data=rat, band_id + age + sex ~ year)
head(cdat)
rat$age
head(cdat)
cdat <- cast(data=rat, band_id + sex + age ~ year + l_d, min)
head(cdat)
cdat <- cast(data=rat, band_id + sex + age ~ year + l_d)
cdat[4:ncol(cdat)] <- ifelse(cdat[2:ncol(cdat)]>=1, 1,0)
cdat[4:ncol(cdat)] <- ifelse(cdat[4:ncol(cdat)]>=1, 1,0)
head(cdat)
unique(rat$sex)
unique(rat$age)
cdat <- cast(data=rat, band_id + age + sex ~ year)
cdat[4:ncol(cdat)] <- ifelse(cdat[4:ncol(cdat)]>=1, 1,0)
cdat$cap <- paste(cdat$"2000",cdat$"2001",cdat$"2002", cdat$"2003",cdat$"2004",cdat$"2005",cdat$"2006",cdat$"2007",cdat$"2008",cdat$"2009",cdat$"2010",cdat$"2011",cdat$"2012",cdat$"2013",cdat$"2014", sep="")
enhist <- data.frame(cdat$band, cdat$sex , cdat$age, cdat$cap)
head(enhist)
enhist$cdat.cap <- as.character(enhist$cdat.cap)
head(enhist)
colnames(enhist) <- c("band","sex","age","ch")
head(enhist)
write.csv(enhist, 'enhist.csv')
cdat <- cast(data=rat, band_id + sex + age ~ year + l_d)
head(cdat)
rat <- rat[rat$l_d!="NA"]
head(rat)
rat <- rat[rat$l_d != "NA",]
unique(rat$l_d)
rat <- rat[rat$l_d != "NA"|rat$l_d != "unknown",]
unique(rat$l_d)
rat <- rat[rat$l_d != "unknown",]
unique(rat$l_d)
cdat <- cast(data=rat, band_id + age + sex ~ year, na.rm=T)
str(rat)
?na.omit
rat <- rat[!(is.na(rat$l_d)),]
str(rat)
unique(rat$l_d)
# Manipulating Raw Data Files from the BBL
setwd("~/Documents/RMark")
dat1 <- read.csv('Fournier_bnds_CAGO_AR_201412180839.csv',header=T)
dat2 <- read.csv('Fournier_encs_from_AR_2000_201412180934.csv',header=T)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
dat1$state <- "AR"
dat1 <- dat1[dat1$SPECIES_ID==1720,] #removes the cackling geese.
dat1 <- dat1[,c("BAND_NUM","AGE_CODE","SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","state")]
dat1$e_date <- NA
dat1$e_day <- NA
dat1$e_month <- NA
dat1$e_year <- NA
dat1$e_present_code <- "alive"
dat2 <- dat2[,c("BAND_NUM","B_AGE_CODE","B_SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","E_PLACE_NAME","ENCOUNTER_DATE","ENCOUNTER_DAY","ENCOUNTER_MONTH","ENCOUNTER_YEAR","E_PRESENT_CONDITION_CODE")]
dat3$state <- "AR"
dat3 <- dat3[,c("BAND.ID","B.AGE.CODE","B.SEX.CODE","BANDING.DATE","BANDING.DAY","BANDING.MONTH","BANDING.YEAR","state","ENCOUNTER.DATE","ENCOUNTER.DAY","ENCOUNTER.MONTH","ENCOUNTER.YEAR","E.PRESENT.CONDITION.CODE")]
colnames(dat3) <- tolower(colnames(dat3))
namesdat3 <- colnames(dat3)
namesdat3 <- gsub(".", '_', namesdat3, fixed = T)
colnames(dat3) <- namesdat3
colnames(dat1) <- colnames(dat3)
colnames(dat2) <- colnames(dat3)
dat1_1 <- rbind(dat1, dat2)
dat1_2 <- rbind(dat1_1, dat3)
dat1_2$l_d <- ifelse(dat1_2$e_present_condition_code==1|dat1_2$e_present_condition_code==2|dat1_2$e_present_condition_code==3,"unknown",
ifelse(dat1_2$e_present_condition_code==4|dat1_2$e_present_condition_code==5|dat1_2$e_present_condition_code==6,"dead",
ifelse(dat1_2$e_present_condition_code==7|dat1_2$e_present_condition_code==8|dat1_2$e_present_condition_code==9|dat1_2$e_present_condition_code==10|dat1_2$e_present_condition_code==11|dat1_2$e_present_condition_code==12|dat1_2$e_present_condition_code==13|dat1_2$e_present_condition_code==14|dat1_2$e_present_condition_code==15|dat1_2$e_present_condition_code==16,"alive",NA)))
write.csv(dat1_2, "canada_geese_arkansas.csv")
names(dat1_2)
unique(dat1_2$e_present_condition_code)
# Manipulating Raw Data Files from the BBL
setwd("~/Documents/RMark")
dat1 <- read.csv('Fournier_bnds_CAGO_AR_201412180839.csv',header=T)
dat2 <- read.csv('Fournier_encs_from_AR_2000_201412180934.csv',header=T)
dat3 <- read.csv('Fournier_encs_to_AR_201412181101.csv',header=T)
dat1$state <- "AR"
dat1 <- dat1[dat1$SPECIES_ID==1720,] #removes the cackling geese.
dat1 <- dat1[,c("BAND_NUM","AGE_CODE","SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","state")]
dat1$e_date <- NA
dat1$e_day <- NA
dat1$e_month <- NA
dat1$e_year <- NA
dat1$e_present_code <- 7
dat2 <- dat2[,c("BAND_NUM","B_AGE_CODE","B_SEX_CODE","BANDING_DATE","BANDING_DAY","BANDING_MONTH","BANDING_YEAR","E_PLACE_NAME","ENCOUNTER_DATE","ENCOUNTER_DAY","ENCOUNTER_MONTH","ENCOUNTER_YEAR","E_PRESENT_CONDITION_CODE")]
dat3$state <- "AR"
dat3 <- dat3[,c("BAND.ID","B.AGE.CODE","B.SEX.CODE","BANDING.DATE","BANDING.DAY","BANDING.MONTH","BANDING.YEAR","state","ENCOUNTER.DATE","ENCOUNTER.DAY","ENCOUNTER.MONTH","ENCOUNTER.YEAR","E.PRESENT.CONDITION.CODE")]
colnames(dat3) <- tolower(colnames(dat3))
namesdat3 <- colnames(dat3)
namesdat3 <- gsub(".", '_', namesdat3, fixed = T)
colnames(dat3) <- namesdat3
colnames(dat1) <- colnames(dat3)
colnames(dat2) <- colnames(dat3)
dat1_1 <- rbind(dat1, dat2)
dat1_2 <- rbind(dat1_1, dat3)
dat1_2$l_d <- ifelse(dat1_2$e_present_condition_code==1|dat1_2$e_present_condition_code==2|dat1_2$e_present_condition_code==3,"unknown",
ifelse(dat1_2$e_present_condition_code==4|dat1_2$e_present_condition_code==5|dat1_2$e_present_condition_code==6,"dead",
ifelse(dat1_2$e_present_condition_code==7|dat1_2$e_present_condition_code==8|dat1_2$e_present_condition_code==9|dat1_2$e_present_condition_code==10|dat1_2$e_present_condition_code==11|dat1_2$e_present_condition_code==12|dat1_2$e_present_condition_code==13|dat1_2$e_present_condition_code==14|dat1_2$e_present_condition_code==15|dat1_2$e_present_condition_code==16,"alive",NA)))
write.csv(dat1_2, "canada_geese_arkansas.csv")
# Making Encounter Histories
library(reshape)
setwd("/Users/AurielFournier/Documents/RMark")
dat <- read.csv("canada_geese_arkansas.csv",header=T)
dat$b_new_year <- ifelse(dat$banding_month>=6,dat$banding_year, dat$banding_year-1)
dat$e_new_year <- ifelse(dat$encounter_month>=6,dat$encounter_year, dat$encounter_year-1)
b <- dat[,c("band_id","b_new_year","l_d","b_age_code","b_sex_code")]
colnames(b) <- c("band_id","year","l_d","age","sex")
e <- dat[,c("band_id","e_new_year","l_d","b_age_code","b_sex_code")]
colnames(e) <- c("band_id","year","l_d","age","sex")
rat <- rbind(b,e)
rat$num <- 1
rat <- rat[rat$year>=2000,]
# Regular Encounter History ---------------------------------------------------
rat <- rat[rat$l_d != "unknown",] #remove the unknowns
rat <- rat[!(is.na(rat$l_d)),] # remove the NA's
cdat <- cast(data=rat, band_id + age + sex ~ year)
cdat[4:ncol(cdat)] <- ifelse(cdat[4:ncol(cdat)]>=1, 1,0)
cdat$cap <- paste(cdat$"2000",cdat$"2001",cdat$"2002", cdat$"2003",cdat$"2004",cdat$"2005",cdat$"2006",cdat$"2007",cdat$"2008",cdat$"2009",cdat$"2010",cdat$"2011",cdat$"2012",cdat$"2013",cdat$"2014", sep="")
enhist <- data.frame(cdat$band, cdat$sex , cdat$age, cdat$cap)
enhist$cdat.cap <- as.character(enhist$cdat.cap)
colnames(enhist) <- c("band","sex","age","ch")
write.csv(enhist, 'enhist.csv')
# live/dead recover encouter history ------------------------------
cdat <- cast(data=rat, band_id + sex + age ~ year + l_d)
rat <- rat[rat$l_d != "unknown",] #remove the unknowns
rat <- rat[!(is.na(rat$l_d)),] # remove the NA's
cdat <- cast(data=rat, band_id + sex + age ~ year + l_d)
cdat
head(cdat)
ncol(cdat)
30/2
names(cdat)
cdat$cap <- paste(cdat$"2000_alive",cdat$"2000_dead",cdat$"2001_alive",cdat$"2001_dead",cdat$"2002_alive",cdat$"2002_dead",cdat$"2003_alive", cdat$"2003_dead",cdat$"2004_alive",cdat$"2004_dead",cdat$"2005_alive",cdat$"2005_dead",cdat$"2006_alive",cdat$"2006_dead",cdat$"2007_alive",cdat$"2007_dead",cdat$"2008_alive",cdat$"2008_dead",cdat$"2009_alive",cdat$"2009_dead",cdat$"2010_alive",cdat$"2010_dead",cdat$"2011_alive",cdat$"2011_dead",cdat$"2012_alive",cdat$"2012_dead",cdat$"2013_alive",cdat$"2013_dead",cdat$"2014_alive",cdat$"2014_dead", sep="")
cdat$cap
rat <- rat[rat$l_d != "unknown",] #remove the unknowns
rat <- rat[!(is.na(rat$l_d)),] # remove the NA's
cdat <- cast(data=rat, band_id + sex + age ~ year + l_d)
cdat$cap <- paste(cdat$"2000_alive",cdat$"2000_dead",cdat$"2001_alive",cdat$"2001_dead",cdat$"2002_alive",cdat$"2002_dead",cdat$"2003_alive", cdat$"2003_dead",cdat$"2004_alive",cdat$"2004_dead",cdat$"2005_alive",cdat$"2005_dead",cdat$"2006_alive",cdat$"2006_dead",cdat$"2007_alive",cdat$"2007_dead",cdat$"2008_alive",cdat$"2008_dead",cdat$"2009_alive",cdat$"2009_dead",cdat$"2010_alive",cdat$"2010_dead",cdat$"2011_alive",cdat$"2011_dead",cdat$"2012_alive",cdat$"2012_dead",cdat$"2013_alive",cdat$"2013_dead",cdat$"2014_alive",cdat$"2014_dead", sep="")
enhist <- data.frame(cdat$band_id, cdat$sex , cdat$age, cdat$cap)
enhist$cdat.cap <- as.character(enhist$cdat.cap)
colnames(enhist) <- c("band","sex","age","ch")
write.csv(enhist, 'live_dead_enhist.csv')
cdat <- cast(data=rat, band_id + age + sex ~ year)
cdat[4:ncol(cdat)] <- ifelse(cdat[4:ncol(cdat)]>=1, 1,0)
cdat$cap <- paste(cdat$"2000",cdat$"2001",cdat$"2002", cdat$"2003",cdat$"2004",cdat$"2005",cdat$"2006",cdat$"2007",cdat$"2008",cdat$"2009",cdat$"2010",cdat$"2011",cdat$"2012",cdat$"2013",cdat$"2014", sep="")
enhist <- data.frame(cdat$band_id, cdat$sex , cdat$age, cdat$cap)
enhist$cdat.cap <- as.character(enhist$cdat.cap)
colnames(enhist) <- c("band","sex","age","ch")
write.csv(enhist, 'enhist.csv')
enhist
